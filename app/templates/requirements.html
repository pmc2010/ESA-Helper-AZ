<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESA Helper - Requirements & Installation Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .requirements-container {
            max-width: 1000px;
            margin-top: 2rem;
        }
        .instruction-card {
            margin-bottom: 1.5rem;
        }
        .command-block {
            background-color: #f5f5f5;
            border-left: 4px solid #007bff;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border-radius: 0.25rem;
        }
        .requirement-item {
            padding: 1rem 0;
            border-bottom: 1px solid #dee2e6;
        }
        .requirement-item:last-child {
            border-bottom: none;
        }
        .tab-content {
            padding: 1.5rem 0;
        }
        h4 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #495057;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/setup">
                <strong>ESA Helper</strong>
                <span class="navbar-text text-light" style="font-size: 0.9rem; margin-left: 0.5rem;">Requirements & Installation Guide</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/setup">Back to Setup</a>
                    </li>
                    {% include '_settings_dropdown.html' %}
                    {% include '_help_dropdown.html' %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="container requirements-container">
        <div class="row">
            <div class="col-lg-10 offset-lg-1">
                <!-- Introduction -->
                <div class="card mb-4 border-primary border-start border-5">
                    <div class="card-header bg-light">
                        <h3 class="mb-0">System Requirements & Installation</h3>
                    </div>
                    <div class="card-body">
                        <p class="lead">
                            ESA Helper is a standalone application that automates your ClassWallet submissions.
                            It can be run on Windows, macOS, or Linux.
                        </p>
                        <p>
                            <strong>Estimated Setup Time:</strong> 10-15 minutes (mostly for downloading dependencies)
                        </p>
                    </div>
                </div>

                <!-- Tabs for OS-specific instructions -->
                <ul class="nav nav-tabs" role="tablist" id="osTab">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="macos-tab" data-bs-toggle="tab" data-bs-target="#macos" type="button">macOS</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="windows-tab" data-bs-toggle="tab" data-bs-target="#windows" type="button">Windows</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="linux-tab" data-bs-toggle="tab" data-bs-target="#linux" type="button">Linux</button>
                    </li>
                </ul>

                <div class="tab-content" id="osTabContent">
                    <!-- macOS Tab -->
                    <div class="tab-pane fade show active" id="macos" role="tabpanel">
                        <h4>macOS Installation</h4>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 1: Install Python (if not already installed)</h5>
                            </div>
                            <div class="card-body">
                                <p>Check if Python 3.11+ is installed:</p>
                                <div class="command-block">
python3 --version
                                </div>
                                <p>If you don't have Python 3.11+, download it from <a href="https://www.python.org/downloads/" target="_blank">python.org</a> or use Homebrew:</p>
                                <div class="command-block">
brew install python@3.11
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 2: Install uv (Python package manager)</h5>
                            </div>
                            <div class="card-body">
                                <p>uv is a fast Python package installer that manages dependencies:</p>
                                <div class="command-block">
curl -LsSf https://astral.sh/uv/install.sh | sh
                                </div>
                                <p>Or with Homebrew:</p>
                                <div class="command-block">
brew install uv
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 3: Install LibreOffice (optional but recommended)</h5>
                            </div>
                            <div class="card-body">
                                <p>LibreOffice is needed to convert Excel invoices to PDF:</p>
                                <div class="command-block">
brew install libreoffice
                                </div>
                                <p>Or download from <a href="https://www.libreoffice.org/download/" target="_blank">LibreOffice.org</a></p>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 4: Install Chrome/Chromium</h5>
                            </div>
                            <div class="card-body">
                                <p>ESA Helper uses Selenium with Chrome for browser automation:</p>
                                <div class="command-block">
brew install --cask google-chrome
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 5: Download and Run ESA Helper</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
cd /path/to/ESA-Helpers
uv run main.py
                                </div>
                                <p>This will automatically install Python dependencies and launch the app in your browser.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Windows Tab -->
                    <div class="tab-pane fade" id="windows" role="tabpanel">
                        <h4>Windows Installation</h4>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 1: Install Python</h5>
                            </div>
                            <div class="card-body">
                                <p>Download Python 3.11+ from <a href="https://www.python.org/downloads/" target="_blank">python.org</a></p>
                                <p><strong>Important:</strong> During installation, check "Add Python to PATH"</p>
                                <p>Verify installation:</p>
                                <div class="command-block">
python --version
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 2: Install uv</h5>
                            </div>
                            <div class="card-body">
                                <p>Open PowerShell and run:</p>
                                <div class="command-block">
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
                                </div>
                                <p>Restart PowerShell and verify:</p>
                                <div class="command-block">
uv --version
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 3: Install LibreOffice (optional)</h5>
                            </div>
                            <div class="card-body">
                                <p>Download from <a href="https://www.libreoffice.org/download/" target="_blank">LibreOffice.org</a> and run the installer.</p>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 4: Install Chrome</h5>
                            </div>
                            <div class="card-body">
                                <p>Download from <a href="https://www.google.com/chrome/" target="_blank">Google Chrome website</a> and install.</p>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 5: Download and Run ESA Helper</h5>
                            </div>
                            <div class="card-body">
                                <p>Open PowerShell in the ESA-Helpers folder:</p>
                                <div class="command-block">
cd C:\path\to\ESA-Helpers
uv run main.py
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Linux Tab -->
                    <div class="tab-pane fade" id="linux" role="tabpanel">
                        <h4>Linux Installation</h4>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 1: Install Python (Ubuntu/Debian)</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
sudo apt-get update
sudo apt-get install python3.11 python3.11-venv
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 2: Install uv</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
curl -LsSf https://astral.sh/uv/install.sh | sh
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 3: Install LibreOffice (optional)</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
sudo apt-get install libreoffice
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 4: Install Chrome</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
sudo apt-get install chromium-browser
                                </div>
                            </div>
                        </div>

                        <div class="instruction-card card">
                            <div class="card-header">
                                <h5 class="mb-0">Step 5: Run ESA Helper</h5>
                            </div>
                            <div class="card-body">
                                <div class="command-block">
cd /path/to/ESA-Helpers
uv run main.py
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary Requirements -->
                <div class="card mt-4 border-success border-start border-5">
                    <div class="card-header bg-light">
                        <h4 class="mb-0">Summary of Requirements</h4>
                    </div>
                    <div class="card-body">
                        <div class="requirement-item">
                            <strong>Python 3.11+</strong>
                            <p class="text-muted mb-0">Programming language runtime</p>
                        </div>
                        <div class="requirement-item">
                            <strong>uv</strong>
                            <p class="text-muted mb-0">Python package manager (downloads dependencies automatically)</p>
                        </div>
                        <div class="requirement-item">
                            <strong>Chrome/Chromium</strong>
                            <p class="text-muted mb-0">Web browser for automation. Must be installed for Selenium to work.</p>
                        </div>
                        <div class="requirement-item">
                            <strong>LibreOffice (Optional)</strong>
                            <p class="text-muted mb-0">Required if you want to convert Excel invoices to PDF. If not installed, PDF conversion will be skipped.</p>
                        </div>
                    </div>
                </div>

                <!-- Troubleshooting -->
                <div class="card mt-4 border-warning border-start border-5">
                    <div class="card-header bg-light">
                        <h4 class="mb-0">Troubleshooting</h4>
                    </div>
                    <div class="card-body">
                        <h5>Python Not Found</h5>
                        <p>Make sure Python 3.11+ is installed and in your system PATH. Restart your terminal after installing Python.</p>

                        <h5 class="mt-3">uv Command Not Found</h5>
                        <p>Restart your terminal/shell after installing uv. If it still doesn't work, check that the installation directory is in your PATH.</p>

                        <h5 class="mt-3">Chrome Browser Not Found</h5>
                        <p>ESA Helper looks for Chrome in standard installation locations. If you installed Chrome in a non-standard location, the application may not find it. Make sure Chrome is installed in the default location for your OS.</p>

                        <h5 class="mt-3">LibreOffice Conversion Failing</h5>
                        <p>If PDF conversion fails, check that LibreOffice is installed. You can still use Excel invoices without PDF conversion. The app will warn you but continue normally.</p>

                        <h5 class="mt-3">Port 5000 Already in Use</h5>
                        <p>If you see "Address already in use", another process is using port 5000. Either stop that process or modify the port in main.py.</p>
                    </div>
                </div>

                <!-- Support -->
                <div class="card mt-4 border-info border-start border-5">
                    <div class="card-header bg-light">
                        <h4 class="mb-0">Need More Help?</h4>
                    </div>
                    <div class="card-body">
                        <p>
                            <strong>Questions or Issues?</strong> Check the application's help menu or the project's documentation.
                        </p>
                        <p class="mb-0">
                            <strong>Want to Contribute?</strong> This is an open-source project. Contributions are welcome!
                        </p>
                    </div>
                </div>

                <div class="text-center mt-4 mb-4">
                    <a href="/setup" class="btn btn-primary btn-lg">Back to Setup</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
